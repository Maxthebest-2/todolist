<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assistant Quotidien</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #10B981;  /* Vert émeraude */
            --secondary-color: #3B82F6; /* Bleu royal */
            --accent-color: #8B5CF6;   /* Violet */
            --background-start: #0F172A;
            --background-mid: #1E293B;
            --background-end: #334155;
            --text-primary: #F8FAFC;
            --text-secondary: #CBD5E1;
            --transition-duration: 0.5s;
        }

        :root[data-theme="light"] {
            --primary-color: #FF6B6B;    /* Corail */
            --secondary-color: #FF9A8B;   /* Pêche */
            --accent-color: #FFC371;      /* Or doux */
            --background-start: #FF8C69;  /* Saumon foncé */
            --background-mid: #FF6B6B;    /* Corail */
            --background-end: #8A2387;    /* Violet profond */
            --text-primary: #FFF9F5;      /* Blanc chaud */
            --text-secondary: #FFE4D6;    /* Blanc pêche */
        }

        body[data-theme="light"] {
            background: linear-gradient(135deg, 
                #FF8C69,  /* Saumon foncé */
                #FF6B6B,  /* Corail */
                #C86DD7   /* Violet clair */
            );
        }

        :root[data-theme="sun"] {
            --primary-color: #FFB74D;    /* Orange clair */
            --secondary-color: #FFA726;   /* Orange */
            --accent-color: #FF9800;      /* Orange foncé */
            --background-start: #FFFFFF;  /* Blanc */
            --background-mid: #FFFFFF;    /* Blanc */
            --background-end: #FFFFFF;    /* Blanc */
            --text-primary: #333333;      /* Texte foncé */
            --text-secondary: #666666;    /* Texte gris */
        }

        body[data-theme="sun"] {
            background: #FFFFFF;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            color: var(--text-primary);
            position: relative;
            overflow-x: hidden;
            transition: color var(--transition-duration) ease,
                      background-color var(--transition-duration) ease;
        }

        @keyframes themeTransition {
            0% {
                opacity: 0;
                transform: scale(1.1) rotate(5deg);
            }
            100% {
                opacity: 1;
                transform: scale(1) rotate(0deg);
            }
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, 
                var(--background-start),
                var(--background-mid),
                var(--background-end)
            );
            transition: all var(--transition-duration) ease;
            z-index: -2;
            animation: themeTransition var(--transition-duration) ease-out;
        }

        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg,
                #FF8C69,  /* Saumon foncé */
                #FF6B6B,  /* Corail */
                #C86DD7   /* Violet clair */
            );
            opacity: 0;
            transition: opacity var(--transition-duration) ease;
            z-index: -1;
        }

        body[data-theme="light"]::before {
            opacity: 0;
        }

        body[data-theme="light"]::after {
            opacity: 1;
        }

        @keyframes gradientShift {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        body::before,
        body::after {
            background-size: 200% 200%;
            animation: gradientShift 15s ease infinite;
        }

        h1 {
            font-size: 2.2em;
            text-align: center;
            margin-bottom: 30px;
            color: var(--text-primary);
            text-shadow: 0 0 20px rgba(99, 102, 241, 0.5);
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .search-container {
            margin: 20px auto 30px;
            max-width: 600px;
            position: relative;
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .search-input {
            flex: 1;
            padding: 15px 20px;
            padding-left: 45px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            color: var(--text-primary);
            font-size: 1.1em;
            font-family: inherit;
            transition: all var(--transition-duration) ease;
        }

        .search-input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.3);
            box-shadow: 0 0 15px rgba(99, 102, 241, 0.2);
        }

        .search-input::placeholder {
            color: var(--text-secondary);
            opacity: 0.7;
        }

        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
            font-size: 1.2em;
        }

        .filter-status {
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: var(--text-primary);
            font-family: inherit;
            cursor: pointer;
            transition: all var(--transition-duration) ease;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filter-status:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        .filter-status.active {
            background: var(--primary-color);
            border-color: var(--primary-color);
        }

        .hidden {
            display: none !important;
        }

        .section {
            background: rgba(255, 255, 255, 0.07);
            backdrop-filter: blur(12px);
            padding: 20px;
            margin: 20px 0;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all var(--transition-duration) ease,
                        backdrop-filter var(--transition-duration) ease;
        }

        .section h2 {
            color: var(--text-primary);
            font-size: 1.4em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .checklist {
            list-style: none;
        }

        .checklist li {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(8px);
            margin: 10px 0;
            padding: 15px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: move;
            user-select: none;
            position: relative;
            transition: all var(--transition-duration) ease,
                        backdrop-filter var(--transition-duration) ease;
        }

        .checklist li:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        .checklist li.dragging {
            opacity: 0.5;
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .checklist input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: var(--primary-color);
        }

        .objectif-text {
            flex-grow: 1;
            margin-right: 10px;
        }

        .objectif-actions {
            display: flex;
            gap: 10px;
            opacity: 0;
            transition: opacity 0.3s ease;
            align-items: center;
        }

        .checklist li:hover .objectif-actions {
                opacity: 1;
        }

        .edit-btn, .delete-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 5px;
            font-size: 1.2em;
            transition: transform 0.2s ease;
        }

        .edit-btn:hover, .delete-btn:hover {
            transform: scale(1.1);
        }

        .date-picker {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            color: var(--text-primary);
            padding: 3px 8px;
            font-family: inherit;
            cursor: pointer;
            transition: all var(--transition-duration) ease;
        }

        .date-picker::-webkit-calendar-picker-indicator {
            filter: invert(1);
            cursor: pointer;
        }

        .add-objectif-btn {
            display: block;
            width: 100%;
            padding: 12px;
            margin-top: 15px;
            background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-family: inherit;
            font-size: 1em;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .add-objectif-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: linear-gradient(135deg, var(--background-start), var(--background-end));
            padding: 25px;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all var(--transition-duration) ease;
        }

        .modal-content h3 {
            color: var(--text-primary);
            margin-bottom: 20px;
        }

        .modal input[type="text"] {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 1em;
            margin-bottom: 20px;
            transition: all var(--transition-duration) ease;
        }

        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .modal-btn {
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-family: inherit;
            font-size: 0.9em;
            transition: transform 0.2s ease;
        }

        .modal-btn.save {
            background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
            color: white;
            border: none;
        }

        .modal-btn.cancel {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: var(--text-primary);
        }

        .modal-btn:hover {
            transform: translateY(-2px);
        }

        .export-import-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .export-btn, .import-btn, .reset-btn {
            flex: 1;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            font-family: inherit;
            font-size: 0.9em;
            transition: all 0.2s ease;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: var(--text-primary);
        }

        .export-btn:hover, .import-btn:hover, .reset-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .section {
                padding: 15px;
            }

            .export-import-buttons {
                flex-direction: column;
            }
        }

        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 15px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 15px;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            z-index: 1000;
            transition: all var(--transition-duration) ease;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .theme-btn {
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            padding: 5px;
            border-radius: 8px;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0.5;
            filter: grayscale(0.5);
            transform-origin: center;
            position: relative;
        }

        .theme-btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: radial-gradient(circle, var(--primary-color) 0%, transparent 70%);
            transform: translate(-50%, -50%);
            transition: all 0.5s ease;
            border-radius: 50%;
            z-index: -1;
            opacity: 0;
        }

        .theme-btn:hover::after {
            width: 150%;
            height: 150%;
            opacity: 0.3;
        }

        .theme-btn.active {
            opacity: 1;
            filter: grayscale(0);
            transform: rotate(360deg) scale(1.2);
            animation: pulseGlow 2s infinite;
        }

        @keyframes pulseGlow {
            0% {
                text-shadow: 0 0 5px var(--primary-color);
            }
            50% {
                text-shadow: 0 0 20px var(--primary-color),
                           0 0 30px var(--accent-color);
            }
            100% {
                text-shadow: 0 0 5px var(--primary-color);
            }
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .theme-btn[data-theme="sun"] {
            color: #FFC371;
            text-shadow: 0 0 20px rgba(255, 195, 113, 0.8);
        }

        .theme-btn[data-theme="dark"] {
            color: #E1E1E1;
            text-shadow: 0 0 15px rgba(225, 225, 225, 0.4);
        }

        .theme-btn[data-theme="light"] {
            color: #FFC371;
            text-shadow: 0 0 20px rgba(255, 195, 113, 0.8);
        }

        :root[data-theme="light"] .section {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(8px);
        }

        :root[data-theme="light"] .checklist li {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(6px);
        }

        :root[data-theme="light"] .checklist li:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        /* Styles de base pour les boutons */
        .priority-btn {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.2);
        }

        .priority-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.8) 0%, transparent 70%);
            transform: translate(-50%, -50%);
            transition: all 0.3s ease;
            border-radius: 50%;
            z-index: 1;
        }

        .priority-btn:hover::before {
            width: 160%;
            height: 160%;
        }

        .priority-btn.active {
            transform: scale(1.15);
            border: 2px solid rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 12px rgba(255, 255, 255, 0.4);
        }

        /* Styles des boutons de priorité */
        .priority-btn.high {
            background: linear-gradient(45deg, #ff4444, #ff6b6b);
            box-shadow: 0 2px 5px rgba(255, 68, 68, 0.3);
        }

        .priority-btn.medium {
            background: linear-gradient(45deg, #ffeb3b, #ffd700);
            box-shadow: 0 2px 5px rgba(255, 235, 59, 0.3);
        }

        .priority-btn.low {
            background: linear-gradient(45deg, #4caf50, #45a049);
            box-shadow: 0 2px 5px rgba(76, 175, 80, 0.3);
        }

        /* Styles de base pour les tâches prioritaires avec surbrillances intenses */
        .priority-high {
            background: linear-gradient(135deg, rgba(255, 68, 68, 0.2), rgba(255, 68, 68, 0.08));
            border-left: 4px solid rgba(255, 68, 68, 1);
            box-shadow: 0 0 45px rgba(255, 68, 68, 0.45),
                       inset 0 0 35px rgba(255, 68, 68, 0.25);
            transition: all 0.5s ease;
            animation: strongGlowHigh 4s infinite;
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .priority-medium {
            background: linear-gradient(135deg, rgba(255, 235, 59, 0.15), rgba(255, 235, 59, 0.06));
            border-left: 3px solid rgba(255, 235, 59, 1);
            box-shadow: 0 0 35px rgba(255, 235, 59, 0.35),
                       inset 0 0 25px rgba(255, 235, 59, 0.2);
            transition: all 0.5s ease;
            animation: mediumGlow 5s infinite;
            backdrop-filter: blur(9px);
            position: relative;
            overflow: hidden;
        }

        .priority-low {
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.12), rgba(76, 175, 80, 0.04));
            border-left: 2px solid rgba(76, 175, 80, 0.9);
            box-shadow: 0 0 25px rgba(76, 175, 80, 0.25),
                       inset 0 0 20px rgba(76, 175, 80, 0.15);
            transition: all 0.5s ease;
            animation: softGlowLow 6s infinite;
            backdrop-filter: blur(8px);
            position: relative;
            overflow: hidden;
        }

        /* Effets de brillance plus intenses */
        .priority-high::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.15) 0%, transparent 70%);
            transform: rotate(45deg);
            animation: strongShimmer 4s infinite;
            pointer-events: none;
        }

        .priority-medium::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.12) 0%, transparent 70%);
            transform: rotate(45deg);
            animation: mediumShimmer 5s infinite;
            pointer-events: none;
        }

        .priority-low::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.08) 0%, transparent 70%);
            transform: rotate(45deg);
            animation: softShimmer 6s infinite;
            pointer-events: none;
        }

        /* Animations de brillance plus intenses */
        @keyframes strongShimmer {
            0% {
                transform: rotate(45deg) translateY(-100%);
                opacity: 0;
            }
            50% {
                opacity: 0.6;
            }
            100% {
                transform: rotate(45deg) translateY(100%);
                opacity: 0;
            }
        }

        @keyframes mediumShimmer {
            0% {
                transform: rotate(45deg) translateY(-100%);
                opacity: 0;
            }
            50% {
                opacity: 0.45;
            }
            100% {
                transform: rotate(45deg) translateY(100%);
                opacity: 0;
            }
        }

        @keyframes softShimmer {
            0% {
                transform: rotate(45deg) translateY(-100%);
                opacity: 0;
            }
            50% {
                opacity: 0.3;
            }
            100% {
                transform: rotate(45deg) translateY(100%);
                opacity: 0;
            }
        }

        @keyframes strongGlowHigh {
            0%, 100% {
                box-shadow: 0 0 45px rgba(255, 68, 68, 0.45),
                           inset 0 0 35px rgba(255, 68, 68, 0.25);
            }
            50% {
                box-shadow: 0 0 60px rgba(255, 68, 68, 0.6),
                           inset 0 0 45px rgba(255, 68, 68, 0.35);
            }
        }

        @keyframes mediumGlow {
            0%, 100% {
                box-shadow: 0 0 35px rgba(255, 235, 59, 0.35),
                           inset 0 0 25px rgba(255, 235, 59, 0.2);
            }
            50% {
                box-shadow: 0 0 45px rgba(255, 235, 59, 0.45),
                           inset 0 0 35px rgba(255, 235, 59, 0.3);
            }
        }

        @keyframes softGlowLow {
            0%, 100% {
                box-shadow: 0 0 25px rgba(76, 175, 80, 0.25),
                           inset 0 0 20px rgba(76, 175, 80, 0.15);
            }
            50% {
                box-shadow: 0 0 35px rgba(76, 175, 80, 0.35),
                           inset 0 0 25px rgba(76, 175, 80, 0.25);
            }
        }

        /* Effets au survol plus intenses */
        .checklist li.priority-high:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.25),
                       0 0 50px rgba(255, 68, 68, 0.3);
            backdrop-filter: blur(12px);
        }

        .checklist li.priority-medium:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.2),
                       0 0 40px rgba(255, 235, 59, 0.25);
            backdrop-filter: blur(10px);
        }

        .checklist li.priority-low:hover {
            transform: translateY(-1px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15),
                       0 0 30px rgba(76, 175, 80, 0.2);
            backdrop-filter: blur(8px);
        }

        /* Styles spécifiques pour le thème plage avec plus d'intensité */
        :root[data-theme="light"] .priority-high {
            background: rgba(255, 255, 255, 0.18);
            box-shadow: 0 0 45px rgba(255, 0, 0, 0.5),
                       inset 0 0 25px rgba(255, 0, 0, 0.25);
        }

        :root[data-theme="light"] .priority-medium {
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 35px rgba(255, 166, 0, 0.4),
                       inset 0 0 20px rgba(255, 166, 0, 0.2);
        }

        :root[data-theme="light"] .priority-low {
            background: rgba(255, 255, 255, 0.12);
            box-shadow: 0 0 25px rgba(0, 128, 0, 0.35),
                       inset 0 0 15px rgba(0, 128, 0, 0.15);
        }
    </style>
</head>
<body>
        <div class="theme-toggle">
            <button class="theme-btn" data-theme="sun">☀️</button>
            <button class="theme-btn active" data-theme="dark">🌙</button>
            <button class="theme-btn" data-theme="light">🏖️</button>
        </div>

        <h1>✨ Assistant Quotidien ✨</h1>

    <div class="search-container">
        <span class="search-icon">🔍</span>
        <input type="text" class="search-input" placeholder="Rechercher des objectifs ou des tâches..." id="searchInput">
        <button id="filterStatus" class="filter-status">
            <span>🔄</span>
            <span>Tout afficher</span>
        </button>
    </div>

    <div class="section">
            <h2>🎯 Objectifs du Jour</h2>
        <ul class="checklist" id="objectifsList"></ul>
            <button id="addObjectifBtn" class="add-objectif-btn">+ Ajouter un objectif</button>
            <div class="export-import-buttons">
            <button id="exportBtn" class="export-btn">📋 Exporter</button>
            <button id="importBtn" class="import-btn">📥 Importer</button>
            <button id="resetBtn" class="reset-btn">🔄 Réinitialiser</button>
            </div>
        </div>

        <div class="section">
            <h2>✅ Checklist Quotidienne</h2>
        <ul class="checklist" id="checklistQuotidienne"></ul>
            <button id="addChecklistBtn" class="add-objectif-btn">+ Ajouter une tâche</button>
            <div class="export-import-buttons">
            <button id="exportChecklistBtn" class="export-btn">📋 Exporter</button>
            <button id="importChecklistBtn" class="import-btn">📥 Importer</button>
            <button id="resetChecklistBtn" class="reset-btn">🔄 Réinitialiser</button>
            </div>
        </div>

        <div id="objectifModal" class="modal">
            <div class="modal-content">
            <h3>Ajouter un objectif</h3>
                <input type="text" id="objectifInput" placeholder="Entrez votre objectif">
                <div class="modal-buttons">
                <button class="modal-btn cancel" id="cancelBtn">Annuler</button>
                <button class="modal-btn save" id="saveBtn">Enregistrer</button>
                </div>
            </div>
        </div>

        <div id="importModal" class="modal">
            <div class="modal-content">
            <h3>Importer des données</h3>
            <textarea id="importTextarea" placeholder="Collez vos données ici..." rows="5" style="width: 100%; padding: 10px; background: rgba(255, 255, 255, 0.1); color: var(--text-primary); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; margin-bottom: 20px;"></textarea>
                <div class="modal-buttons">
                <button class="modal-btn cancel" id="cancelImportBtn">Annuler</button>
                <button class="modal-btn save" id="confirmImportBtn">Importer</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Configuration du thème
            const themeButtons = document.querySelectorAll('.theme-btn');
            const root = document.documentElement;
            
            // Charger le thème sauvegardé
            const savedTheme = localStorage.getItem('theme') || 'dark';
            root.setAttribute('data-theme', savedTheme);
            themeButtons.forEach(btn => {
                btn.classList.toggle('active', btn.dataset.theme === savedTheme);
            });

            // Gestionnaire de changement de thème
            themeButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const theme = btn.dataset.theme;
                    root.setAttribute('data-theme', theme);
                    localStorage.setItem('theme', theme);
                    
                    // Animation des boutons
                    themeButtons.forEach(b => {
                        if (b === btn) {
                            b.classList.add('active');
                            b.style.transform = 'rotate(360deg)';
                        } else {
                            b.classList.remove('active');
                            b.style.transform = 'rotate(0deg)';
                        }
                    });
                });
            });

            // État global
            let editingIndex = -1;
            let currentList = null;
            let filterState = 'all'; // 'all', 'done', 'notDone'

            // Éléments DOM
            const objectifsList = document.getElementById('objectifsList');
            const checklistQuotidienne = document.getElementById('checklistQuotidienne');
            const objectifModal = document.getElementById('objectifModal');
            const importModal = document.getElementById('importModal');
            const objectifInput = document.getElementById('objectifInput');
            const searchInput = document.getElementById('searchInput');
            const filterStatusBtn = document.getElementById('filterStatus');

            // Gestion du filtre de statut
            filterStatusBtn.addEventListener('click', () => {
                switch(filterState) {
                    case 'all':
                        filterState = 'done';
                        filterStatusBtn.innerHTML = '<span>✅</span><span>Tâches faites</span>';
                        break;
                    case 'done':
                        filterState = 'notDone';
                        filterStatusBtn.innerHTML = '<span>📝</span><span>Tâches à faire</span>';
                        break;
                    case 'notDone':
                        filterState = 'all';
                        filterStatusBtn.innerHTML = '<span>🔄</span><span>Tout afficher</span>';
                        break;
                }
                filterStatusBtn.classList.toggle('active', filterState !== 'all');
                filterItems(searchInput.value);
            });

            // Fonction de recherche modifiée
            function filterItems(searchText) {
                const items = document.querySelectorAll('.checklist li');
                const searchTerms = searchText.toLowerCase().split(' ').filter(term => term.length > 0);
                
                items.forEach(item => {
                    const text = item.querySelector('.objectif-text').textContent.toLowerCase();
                    const date = item.querySelector('.date-picker').value;
                    const isChecked = item.querySelector('input[type="checkbox"]').checked;
                    
                    const matchesSearch = searchTerms.length === 0 || searchTerms.every(term => 
                        text.includes(term) || (date && date.includes(term))
                    );

                    const matchesFilter = filterState === 'all' || 
                        (filterState === 'done' && isChecked) || 
                        (filterState === 'notDone' && !isChecked);
                    
                    item.classList.toggle('hidden', !matchesSearch || !matchesFilter);
                });
            }

            // Événement de recherche
            searchInput.addEventListener('input', (e) => {
                filterItems(e.target.value);
            });

            // Fonctions utilitaires
            function sauvegarderListe(liste, storageKey) {
                const items = Array.from(liste.children).map((li, index) => ({
                    texte: li.querySelector('.objectif-text').textContent,
                    checked: li.querySelector('input[type="checkbox"]').checked,
                    date: li.querySelector('.date-picker').value,
                    position: index,
                    priority: li.classList.contains('priority-high') ? 'high' :
                             li.classList.contains('priority-medium') ? 'medium' :
                             li.classList.contains('priority-low') ? 'low' : null
                }));
                localStorage.setItem(storageKey, JSON.stringify(items));
            }

            function chargerListe(liste, storageKey) {
                const itemsSauvegardes = localStorage.getItem(storageKey);
                if (itemsSauvegardes) {
                    const items = JSON.parse(itemsSauvegardes);
                    liste.innerHTML = '';
                    items.sort((a, b) => a.position - b.position)
                        .forEach(item => {
                            const li = createListElement(item.texte, liste, storageKey);
                            li.querySelector('input[type="checkbox"]').checked = item.checked;
                            if (item.date) {
                                li.querySelector('.date-picker').value = item.date;
                            }
                            if (item.priority) {
                                li.classList.add(`priority-${item.priority}`);
                                li.querySelector(`.priority-btn.${item.priority}`).classList.add('active');
                            }
                            liste.appendChild(li);
                    });
                }
            }

            // Création des éléments
            function createListElement(text, liste, storageKey) {
                const li = document.createElement('li');
                li.setAttribute('draggable', true);
                li.innerHTML = `
                    <input type="checkbox">
                    <span class="objectif-text">${text}</span>
                    <div class="objectif-actions">
                        <div class="priority-buttons">
                            <button class="priority-btn high" title="Priorité haute"></button>
                            <button class="priority-btn medium" title="Priorité moyenne"></button>
                            <button class="priority-btn low" title="Priorité basse"></button>
                        </div>
                        <input type="date" class="date-picker">
                        <button class="edit-btn">✏️</button>
                        <button class="delete-btn">🗑️</button>
                    </div>
                `;

                // Gestionnaire pour les boutons de priorité
                const priorityButtons = li.querySelectorAll('.priority-btn');
                priorityButtons.forEach(btn => {
                    btn.addEventListener('click', () => {
                        // Supprimer toutes les classes de priorité
                        li.classList.remove('priority-high', 'priority-medium', 'priority-low');
                        priorityButtons.forEach(b => b.classList.remove('active'));

                        // Ajouter la nouvelle classe de priorité
                        if (btn.classList.contains('high')) {
                            li.classList.add('priority-high');
                        } else if (btn.classList.contains('medium')) {
                            li.classList.add('priority-medium');
                        } else if (btn.classList.contains('low')) {
                            li.classList.add('priority-low');
                        }
                        
                        btn.classList.add('active');
                        sauvegarderListe(liste, storageKey);
                    });
                });

                // Événements
                li.querySelector('input[type="checkbox"]').addEventListener('change', () => {
                    sauvegarderListe(liste, storageKey);
                    filterItems(searchInput.value);
                });

                li.querySelector('.date-picker').addEventListener('change', () => {
                    sauvegarderListe(liste, storageKey);
                });

                li.querySelector('.edit-btn').addEventListener('click', () => {
                    editingIndex = Array.from(liste.children).indexOf(li);
                    currentList = liste;
                    objectifInput.value = li.querySelector('.objectif-text').textContent;
                    objectifModal.style.display = 'flex';
                    const titre = liste === objectifsList ? 'Modifier l\'objectif' : 'Modifier la tâche';
                    objectifModal.querySelector('h3').textContent = titre;
                });

                li.querySelector('.delete-btn').addEventListener('click', () => {
                    const message = liste === objectifsList ? 
                        'Voulez-vous vraiment supprimer cet objectif ?' : 
                        'Voulez-vous vraiment supprimer cette tâche ?';
                    if (confirm(message)) {
                        li.remove();
                        sauvegarderListe(liste, storageKey);
                    }
                });

                return li;
            }

            // Configuration du drag and drop
            function setupDragAndDrop(liste, storageKey) {
                let draggingElement = null;

                liste.addEventListener('dragstart', (e) => {
                    if (e.target.tagName === 'LI') {
                        draggingElement = e.target;
                        setTimeout(() => {
                            draggingElement.classList.add('dragging');
                        }, 0);
                    }
                });

                liste.addEventListener('dragend', () => {
                    if (draggingElement) {
                        draggingElement.classList.remove('dragging');
                        draggingElement = null;
                        sauvegarderListe(liste, storageKey);
                    }
                });

                liste.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    if (!draggingElement) return;

                    const afterElement = getDropPosition(liste, e.clientY);
                    if (afterElement) {
                        liste.insertBefore(draggingElement, afterElement);
                    } else {
                        liste.appendChild(draggingElement);
                    }
                });

                function getDropPosition(container, y) {
                    const draggableElements = [...container.querySelectorAll('li:not(.dragging)')];
                    return draggableElements.reduce((closest, child) => {
                        const box = child.getBoundingClientRect();
                        const offset = y - box.top - box.height / 2;
                        if (offset < 0 && offset > closest.offset) {
                            return { offset: offset, element: child };
                        } else {
                            return closest;
                        }
                    }, { offset: Number.NEGATIVE_INFINITY }).element;
                }
            }

            // Configuration des boutons d'ajout
            document.getElementById('addObjectifBtn').addEventListener('click', () => {
                editingIndex = -1;
                currentList = objectifsList;
                objectifInput.value = '';
                objectifModal.style.display = 'flex';
                objectifModal.querySelector('h3').textContent = 'Ajouter un objectif';
            });

            document.getElementById('addChecklistBtn').addEventListener('click', () => {
                editingIndex = -1;
                currentList = checklistQuotidienne;
                objectifInput.value = '';
                objectifModal.style.display = 'flex';
                objectifModal.querySelector('h3').textContent = 'Ajouter une tâche';
            });

            // Gestion des modales
            document.getElementById('saveBtn').addEventListener('click', () => {
                const text = objectifInput.value.trim();
                if (!text || !currentList) return;

                const storageKey = currentList === objectifsList ? 'objectifs' : 'checklist';
                if (editingIndex === -1) {
                    const li = createListElement(text, currentList, storageKey);
                    currentList.appendChild(li);
                } else {
                    const item = currentList.children[editingIndex];
                    item.querySelector('.objectif-text').textContent = text;
                }

                sauvegarderListe(currentList, storageKey);
                objectifModal.style.display = 'none';
                objectifInput.value = '';
                editingIndex = -1;
                currentList = null;
            });

            document.getElementById('cancelBtn').addEventListener('click', () => {
                objectifModal.style.display = 'none';
                objectifInput.value = '';
                editingIndex = -1;
                currentList = null;
            });

            // Gestion de l'export/import
            function setupExportImport(exportBtn, importBtn, liste, storageKey) {
                exportBtn.addEventListener('click', async () => {
                    const items = Array.from(liste.children).map(li => ({
                    texte: li.querySelector('.objectif-text').textContent,
                        checked: li.querySelector('input[type="checkbox"]').checked,
                        date: li.querySelector('.date-picker').value,
                        position: Array.from(liste.children).indexOf(li)
                }));
                try {
                        await navigator.clipboard.writeText(JSON.stringify(items, null, 2));
                        alert('Données exportées avec succès !');
                } catch (err) {
                        alert('Erreur lors de l\'exportation.');
                }
            });

                importBtn.addEventListener('click', () => {
                document.getElementById('importTextarea').value = '';
                    importModal.style.display = 'flex';
                    document.getElementById('confirmImportBtn').dataset.targetList = storageKey;
                });
            }

            // Configuration des boutons de réinitialisation
            function setupResetButton(resetBtn, liste, storageKey) {
                resetBtn.addEventListener('click', () => {
                    if (confirm('Voulez-vous vraiment réinitialiser toutes les cases ?')) {
                        liste.querySelectorAll('input[type="checkbox"]').forEach(cb => {
                            cb.checked = false;
                        });
                        sauvegarderListe(liste, storageKey);
                    }
                });
            }

            // Gestion de l'importation
            document.getElementById('confirmImportBtn').addEventListener('click', () => {
                const importText = document.getElementById('importTextarea').value.trim();
                if (!importText) {
                    alert('Veuillez coller des données à importer.');
                    return;
                }

                try {
                    const importedData = JSON.parse(importText);
                    const targetKey = document.getElementById('confirmImportBtn').dataset.targetList;
                    const targetList = targetKey === 'objectifs' ? objectifsList : checklistQuotidienne;

                    importedData.forEach(item => {
                        const li = createListElement(item.texte, targetList, targetKey);
                        li.querySelector('input[type="checkbox"]').checked = item.checked;
                        if (item.date) {
                            li.querySelector('.date-picker').value = item.date;
                        }
                        targetList.appendChild(li);
                    });

                    sauvegarderListe(targetList, targetKey);
                    importModal.style.display = 'none';
                    document.getElementById('importTextarea').value = '';
                    alert('Importation réussie !');
                } catch (error) {
                    alert('Erreur lors de l\'importation. Vérifiez le format des données.');
                }
            });

            document.getElementById('cancelImportBtn').addEventListener('click', () => {
                importModal.style.display = 'none';
                document.getElementById('importTextarea').value = '';
            });

            // Fermeture des modales en cliquant en dehors
            window.addEventListener('click', (e) => {
                if (e.target === objectifModal) {
                    objectifModal.style.display = 'none';
                    objectifInput.value = '';
                    editingIndex = -1;
                    currentList = null;
                }
                if (e.target === importModal) {
                    importModal.style.display = 'none';
                    document.getElementById('importTextarea').value = '';
                }
            });

            // Initialisation
            setupDragAndDrop(objectifsList, 'objectifs');
            setupDragAndDrop(checklistQuotidienne, 'checklist');

            setupExportImport(
                document.getElementById('exportBtn'),
                document.getElementById('importBtn'),
                objectifsList,
                'objectifs'
            );

            setupExportImport(
                document.getElementById('exportChecklistBtn'),
                document.getElementById('importChecklistBtn'),
                checklistQuotidienne,
                'checklist'
            );

            setupResetButton(document.getElementById('resetBtn'), objectifsList, 'objectifs');
            setupResetButton(document.getElementById('resetChecklistBtn'), checklistQuotidienne, 'checklist');

            // Chargement initial des données
            chargerListe(objectifsList, 'objectifs');
            chargerListe(checklistQuotidienne, 'checklist');
        });
    </script>
</body>
</html> 